FROM debian:bullseye-slim

RUN apt-get update && apt-get install -y \
    corosync pacemaker pcs psmisc \
    iproute2 iputils-ping \
    && rm -rf /var/lib/apt/lists/*

# Add Traefik binary
COPY --from=traefik:v2.10 /usr/local/bin/traefik /usr/local/bin/traefik

# Setup configuration directories
mkdir -p /etc/corosync /etc/pacemaker

# We will provide config via volumes or scripts
ENTRYPOINT ["/usr/sbin/pacemakerd"]
